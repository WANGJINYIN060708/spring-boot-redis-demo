(function($){$.util.namespace("$.fn.window.extensions");$(function(){$(document).keydown(function(e){if(e.which!=27){return}var items=$("div.window-mask:visible");if(!items.length){return}var item=$.array.max(items,function(a,b){return $(a).css("zindex")-$(b).css("zindex")});$(item).prevAll("div.panel.window:first").children(".window-body").each(function(){if(!$.data(this,"window")){return}var t=$(this),opts=t.window("options");if(opts&&opts.closable&&opts.closeOnEsc&&!t.window("header").find(".panel-tool a").attr("disabled")){t.window("close")}})});$("body").on("click","div.window-mask",function(e){$(this).prevAll("div.panel.window:first").shine(125,6)})});var methods=$.fn.window.extensions.methods={};var defaults=$.fn.window.extensions.defaults={closeOnEsc:true};$.extend($.fn.window.defaults,defaults);$.extend($.fn.window.methods,methods)})(jQuery);
