(function($){$.util.namespace("$.easyui");$.easyui.isComponent=$.easyui.isEasyUiComponent=$.easyui.isEasyUI=function(selector,plugin,ignoreValid){if(!selector||!plugin)return false;ignoreValid=ignoreValid==null||ignoreValid==undefined?false:!!ignoreValid;if(!ignoreValid&&!$.array.contains($.parser.plugins,plugin)){alert($.string.format($.easyui.isComponent.defaults.errorMessage,plugin))}var t=$(selector);if(!t.length)return false;var state=$.data(t[0],plugin);return state&&state.options?true:false};$.easyui.isComponent.defaults={errorMessage:"传入的参数 plugin: {0} 不是 easyui 插件名。"};$.extend({isEasyUiComponent:function(selector,plugin,ignoreValid){return $.easyui.isComponent(selector,plugin,ignoreValid)}});$.fn.extend({isEasyUiComponent:function(plugin,ignoreValid){return $.easyui.isComponent(this,plugin,ignoreValid)},currentLayout:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("layout",true)})},currentRegionPanel:function(){return $.util.closest(this,function(){if(!this.isEasyUiComponent("panel",true)||!this.is(".layout-body")){return false}var panel=this.panel("panel");if(!panel.is(".layout-panel")){return false}var layout=panel.parent();return layout.isEasyUiComponent("layout",true)})},currentPanelRegion:function(){var p=this.currentRegionPanel();if(!p.length){return null}var panel=p.panel("panel");if(panel.is(".layout-panel-north")){return"north"}if(panel.is(".layout-panel-south")){return"south"}if(panel.is(".layout-panel-west")){return"west"}if(panel.is(".layout-panel-east")){return"east"}if(panel.is(".layout-panel-center")){return"center"}return null},currentPanel:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("panel",true)})},currentTabs:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("tabs",true)})},currentTabPanel:function(){return $.util.closest(this,function(){if(!this.isEasyUiComponent("panel",true)){return false}var panel=this.panel("panel"),panels=panel.parent(),container=panels.parent();return panels.is(".tabs-panels")&&container.is(".tabs-container")})},currentTabIndex:function(){var p=this.currentTabPanel();return p.length?p.panel("panel").index():-1},currentAccordion:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("accordion",true)})},currentAccPanel:function(){return $.util.closest(this,function(){if(!this.isEasyUiComponent("panel",true)||!this.is(".accordion-body")){return false}var panel=this.panel("panel"),accordion=panel.parent();return accordion.isEasyUiComponent("accordion",true)})},currentAccIndex:function(){var p=this.currentAccPanel();return p.length?p.panel("panel").index():-1},currentWindow:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("window",true)})},currentDialog:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("dialog",true)})},currentForm:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("form",true)})},currentTree:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("tree",true)})},currentDatagrid:function(){var grid=null,p=$.util.closest(this,function(){if(!this.isEasyUiComponent("panel",true)||!this.is(".datagrid-wrap")){return false}grid=this.find(">.datagrid-view>:eq(2)");return grid.isEasyUiComponent("datagrid",true)});return p.length&&grid&&grid.length?grid:p},currentTreegrid:function(){var grid=null,p=$.util.closest(this,function(){if(!this.isEasyUiComponent("panel",true)||!this.is(".datagrid-wrap")){return false}grid=this.find(">.datagrid-view>:eq(2)");return grid.isEasyUiComponent("treegrid",true)});return p.length&&grid&&grid.length?grid:p},currentPropertygrid:function(){var grid=null,p=$.util.closest(this,function(){if(!this.isEasyUiComponent("panel",true)||!this.is(".datagrid-wrap")){return false}grid=this.find(">.datagrid-view>:eq(2)");return grid.isEasyUiComponent("propertygrid",true)});return p.length&&grid&&grid.length?grid:p},currentLinkbutton:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("linkbutton",true)})},currentMenubutton:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("menubutton",true)})},currentSplitbutton:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("splitbutton",true)})},currentCalendar:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("calendar",true)})},currentTooltip:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("tooltip",true)})},currentProgressbar:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("progressbar",true)})},currentDraggable:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("draggable",true)})},currentDroppable:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("droppable",true)})},currentResizable:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("resizable",true)})},currentPagination:function(){return $.util.closest(this,function(){return this.isEasyUiComponent("pagination",true)})}});$.easyui.loading=function(options){var opts=$.extend({},$.easyui.loading.defaults,options||{}),jq=opts.topMost?$.util.$:$,locale=jq(opts.locale),zindex=opts.zindex;if(locale.is(".loading-locale")||locale.children(".loading-container").length){return false}if(!zindex){var zindexes=locale.children().map(function(){var i=$(this).css("z-index");return $.isNumeric(i)?window.parseInt(i):0});zindex=zindexes.length?$.array.max(zindexes):1}if(!locale.is("body")){locale.addClass("loading-locale")}var container=jq('<div class="loading-container"></div>').css("z-index",++zindex).appendTo(locale),mask=jq('<div class="loading-mask datagrid-mask"></div>').css("z-index",++zindex).appendTo(container),msg=jq('<div class="loading-message datagrid-mask-msg"></div>').css("z-index",++zindex).html(opts.msg).appendTo(container);var msgWidth=msg.outerWidth();msg.css("marginLeft",-msgWidth/2+-msgWidth/4);return mask};$.easyui.loading.defaults={topMost:false,locale:"body",zindex:null,msg:"正在加载，请稍等..."};$.easyui.loaded=function(locale,topMost){var opts=$.extend({},$.easyui.loaded.defaults);if(arguments.length==1){var val=arguments[0],type=typeof val;if(type=="boolean"){$.extend(opts,{topMost:val})}else if(type=="string"||$.util.isJqueryDOM(val)){$.extend(opts,{locale:val})}else{$.extend(opts,val)}}else if(arguments.length>=2){var val=arguments[0],type=typeof val;if(type=="boolean"){$.extend(opts,{locale:arguments[1],topMost:arguments[0]})}else if(type=="string"||$.util.isJqueryDOM(val)){$.extend(opts,{locale:arguments[0],topMost:arguments[1]})}else{$.extend(opts,val)}}var jq=opts.topMost?$.util.$:$;jq(opts.locale).removeClass("loading-locale").children(".loading-container").remove()};$.easyui.loaded.defaults={locale:"body",topMost:false};$.extend($.fn.panel.defaults,{loadingMessage:$.easyui.loading.defaults.msg});$.extend($.fn.window.defaults,{loadingMessage:$.easyui.loading.defaults.msg});$.extend($.fn.dialog.defaults,{loadingMessage:$.easyui.loading.defaults.msg});$.extend($.fn.datagrid.defaults,{loadingMessage:$.easyui.loading.defaults.msg});$.extend($.fn.datalist.defaults,{loadingMessage:$.easyui.loading.defaults.msg});$.extend($.fn.propertygrid.defaults,{loadingMessage:$.easyui.loading.defaults.msg});$.extend($.fn.combogrid.defaults,{loadingMessage:$.easyui.loading.defaults.msg});$.extend($.fn.treegrid.defaults,{loadingMessage:$.easyui.loading.defaults.msg})})(jQuery);
